<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>云之讯-短信平台</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="baidu-site-verification" content="zNwez22Bcq"/>
    <meta name="google-site-verification" content="6hC_46bMT6_bGxmL_Ec5V_7xnPSnQBhQBl8y3MtfoFc" />
    <meta name="Baiduspider" content="noarchive"/>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"/>
    <link rel="shortcut icon" href="/img/logo2.png" type="image/x-icon" th:href="@{/img/logo2.png}">

    <link rel='stylesheet' href='css/reset.css' th:href="@{/css/reset.css?v=1.0}"/>
    <link rel='stylesheet' href='css/base.css' th:href="@{/css/base.css?v=1.0}"/>
    <link rel='stylesheet' href='css/oem.css' th:href="@{/css/oem.css?v=1.0}"/>
    <link rel='stylesheet' href='/font/iconfont.css' th:href="@{/font/iconfont.css?v=1.0}"/>
    <link rel='stylesheet' href='/css/main.css' th:href="@{/css/main.css?v=1.0}"/>
    <script src="/js/jquery.min.js"  th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript" src="/js/common.js" th:src="@{/js/common.js}"></script>
    <script type="text/javascript" th:src="@{/js/layer/layer.js}"></script>

</head>
<body >
<div id="wrap" class="clearfix">
    <!-- 左侧导航栏 bf-->
    <div id="sidebar" th:replace="console :: #sidebar">
        <div class="logo">
            <a href="/" title="云之讯"><img src="/img/logo2.png" alt="云之讯" /></a>
        </div>
        <div class="nav">
            <ul>
                <li><a href="/console"  class="cur"><span class="iconfont icon-shouyeshouye"></span>首页</a></li>
                <li>
                    <a href="javascript:void(0)"><span class="iconfont icon-duanxin"></span>传统短信<i></i></a>
                    <ul class="sub-nav">
                        <li><a href="/console/bussiness/send.html" class="">短信发送<span></span></a></li>
                        <li><a href="/console/bussiness/template.html" class="">短信模板管理<span></span></a></li>
                        <li><a href="/console/bussiness/record.html"  class="">短信发送记录<span></span></a></li>
                        <li><a href="/console/bussiness/daystat.html" class="">短信数据统计<span></span></a></li>
                        <li><a href="/console/bussiness/price.html"  class="">国际短信报价<span></span></a></li>
                    </ul>
                </li>
                <li>
                    <a href="javascript:void(0)"><span class="iconfont icon-caixin2"></span>彩印<i></i></a>
                    <ul class="sub-nav">
                        <li><a href="/console/mms/send.html" class="">彩印发送<span></span></a></li>
                        <li><a href="/console/mms/template.html" class="">彩印模版管理<span></span></a></li>
                        <li><a href="/console/mms/record.html"  class="">彩印发送记录<span></span></a></li>
                        <li><a href="/console/mms/ussdday.html" class="">彩印数据统计<span></span></a></li>
                    </ul>
                </li>
                <li>
                    <a href="javascript:void(0)"><span class="iconfont icon-qianbi01"></span>财务管理<i></i></a>
                    <ul class="sub-nav">
                        <li><a href="/console/order/list.html" class="">我的订单<span></span></a></li>
                    </ul>
                </li>
                <li>
                    <a href="javascript:void(0)" class=""><span class="iconfont icon-shenfenzheng"></span>账户管理<i></i></a>
                    <ul class="sub-nav">
                        <li><a href="/console/account/info.html" class="">账户资料<span></span></a></li>
                        <li><a href="/console/account/security.html" class="">账户安全<span></span></a></li>
                    </ul>
                </li>
                <li>
                    <a href="javascript:void(0)"><span class="iconfont icon-bangzhuzhongxin"></span>帮助中心<i></i></a>
                    <ul class="sub-nav">
                        <li><a href="/console/help/smsAccessIntroduce.html" class="">短信接入<span></span></a></li>
                        <li><a href="/console/help/FAQ.html">FAQ<span></span></a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <!-- 左侧导航栏 ef -->

    <!-- 右边内容 bf -->
    <div id="main">
        <div class="main-con">
            <div class="top help-top clearfix">
                <h1 th:text="${title}"></h1>
                <div class="ft-r ">
                    <a href="/console/quit" class="lay-out btn-white btn-small btn" th:href="@{/console/quit}">退出</a>
                </div>
                <!--
                <div class="top-r ft-r">
                    <span class="contact-phone" th:text="'联系电话：'+${accountModel.agentMobile}">联系电话：18689206965</span>
                </div> -->
            </div>
            <div class="con-out">
                <div class="crumbs clearfix">
                    <a class="active ft-l" href="javascript:;" th:text="${title}"></a>
                </div>
                <form id="getOrderForm" th:action="@{/console/remainList} + '?productType=' +  ${productType}" method="post">
                    <input id="pageRowCount" type="hidden" name="pageSize" th:value="${pageBean.pageSize}"/>
                    <input id="" type="hidden" name="productType" th:value="${productType}"/>
                    <input id="goalPage" type="hidden" name="goalPage" value=""/>
                </form>
                <table class="grid-table grid-table-tx-c grid-table-border bg-white" style="width:94%;margin:20px auto;">
                    <thead>
                    <tr>
                        <th style="width:20%;">序号</th>
                        <th style="width:20%;">产品类型</th>
                        <th style="width:20%;">运营商</th>
                        <th style="width:20%;">区域</th>
                        <th style="width:20%;">余额</th>
                        <th style="width:20%;">单价</th>
                        <th style="width:20%;">到期时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="item,iterStat:${pageBean.list }">
                        <td th:text="${item.rownum}"></td>
                        <td th:text="${item.product_type_name}"></td>
                        <td th:text="${item.operator_code_str}"></td>
                        <td th:text="${item.area_code_str}"></td>
                        <td th:text="${item.remain_quantity}+'元'" th:if="${item.product_type==2}"></td>
                        <td th:text="${#numbers.formatDecimal(item.remain_quantity, 1, 0)}+'条'" th:if="${item.product_type==0}"></td>
                        <td th:text="${#numbers.formatDecimal(item.remain_quantity, 1, 0)}+'条'" th:if="${item.product_type==1}"></td>
                        <td th:text="${#numbers.formatDecimal(item.remain_quantity, 1, 0)}+'条'" th:if="${item.product_type==3}"></td>
                        <td th:text="${#numbers.formatDecimal(item.remain_quantity, 1, 0)}+'条'" th:if="${item.product_type==4}"></td>
                        <td th:text="${#numbers.formatDecimal(item.remain_quantity, 1, 0)}+'条'" th:if="${item.product_type==7}"></td>
                        <td th:text="${#numbers.formatDecimal(item.remain_quantity, 1, 0)}+'条'" th:if="${item.product_type==8}"></td>
                        <td th:text="${item.price}"  th:if="${item.product_type==2}"></td>
                        <td th:text="${item.price}+'元'"  th:if="${item.product_type!=2}"></td>
                        <td >
                            <span th:if="${item.end_time_str}" th:text="${item.end_time_str}"></span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="8" class="clearfix">
                            <div class="pagination ft-r clearfix" style="width:auto;">
                                <div class="show-count ft-l">共有<span class="allCount" th:text="${pageBean.totalRows }">  </span>条，每页显示
                                    <span class="select"><span th:text="${pageBean.pageSize}"></span>
                                                <ul class="show-num">
                                                    <li>5</li>
                                                    <li>10</li>
                                                    <li>15</li>
                                                    <li>20</li>
                                                </ul>
                                            </span> 条
                                </div>
                                <input id="currentPage" type="hidden" th:value="${pageBean.currentPage }"/>
                                <input id="totalPages" type="hidden" th:value="${pageBean.totalPages }"/>
                                <input id="hasNextPage" type="hidden" th:value="${pageBean.hasNextPage }"/>
                                <input id="hasPreviousPage" type="hidden" th:value="${pageBean.hasPreviousPage }"/>
                                <ul class="pre-after ft-l">
                                    <li class="first">
                                        <a href="javascript:;" onclick="firstPage()"></a>
                                    </li>
                                    <li class="pre">
                                        <a href="javascript:;" onclick="prePage()"></a>
                                    </li>
                                    <li class="now"><a href="javascript:;" th:text="${pageBean.currentPage}+'/'+${pageBean.totalPages}">555555</a></li>
                                    <li class="after">
                                        <a href="javascript:;" onclick="afterPage()"></a>
                                    </li>
                                    <li class="last">
                                        <a href="javascript:;" onclick="lastPage()"></a>
                                    </li>
                                </ul>
                                <input id="jump-to" type="text" class="jump-to ft-l" name="jump-to" style="position: relative;width:24px;" />
                                <a href="javascript:;" class="ft-l" onclick="jumpToPage()">跳转</a>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <div class="btm-copyright">
                    <p>© 2016 ucpaas.com 版权所有 粤ICP备14046848号</p>
                </div>
            </div>
        </div>
    </div>
    <!-- 右边内容 ef -->
</div>

<script type="text/javascript">
    $(function() {

    })

    var searchForm = $("#getOrderForm");

    function getOrderList() {
        var goalPage = 1;
        if(!isSessionValid()){return}
        searchForm.find("#goalPage").val(goalPage);
        searchForm.submit();
    }

    function getPageByNum(goalPage) {
        if(!isSessionValid()){return}
        searchForm.find("#goalPage").val(goalPage);
        searchForm.submit();
    }

    var reloadFun = function() {
        //     		var goalPage = $('#currentPage').val();
        //     		getPageByNum(goalPage);

        var goalPage = 1;
        if(!isSessionValid()){return}
        searchForm.find("#goalPage").val(goalPage);
        searchForm.submit();

    }

    function prePage() {
        var hasPreviousPage = $('#hasPreviousPage').val();
        if (hasPreviousPage != "true") {
            layer.alert("已经首页！");
            return;
        }
        var goalPage = $('#currentPage').val() - 1;
        getPageByNum(goalPage);
    }

    function afterPage() {
        var hasNextPage = $('#hasNextPage').val();
        if (hasNextPage != "true") {
            layer.alert("已经是最后一页！");
            return;
        }
        var goalPage = parseInt($('#currentPage').val()) + 1;
        getPageByNum(goalPage);
    }

    function jumpToPage() {
        var jumpPage = $('#jump-to').val();
        if (jumpPage == "") {
            layer.alert("请输入跳转的页数");
            return;
        }

        var goalPage = parseInt(jumpPage);
        if (goalPage < 1) {
            goalPage = 1;
        }

        var lastPage = parseInt($('#totalPages').val());
        if (goalPage > lastPage) {
            goalPage = lastPage;
        }

        if (goalPage == 0) {
            $("#jump-to").val("");
            return;
        }

        getPageByNum(goalPage);
    }

    function firstPage() {

        /* var totalPages = $('#totalPages').val();
         if(parseInt(totalPages) == 0){
         layer.alert("已经是首页！");
         return;
         } */

        var goalPage = 1;
        getPageByNum(goalPage);
    }

    function lastPage() {
        var goalPage = $('#totalPages').val();

        /* if(parseInt(goalPage) == 0){
         layer.alert("已经是最后一页！");
         return;
         } */

        getPageByNum(goalPage);
    }
</script>
</body>
</html>